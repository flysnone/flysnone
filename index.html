<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>러시안 룰렛</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            width: 100%;
            max-width: 600px;
            padding: 20px;
        }
        .button, .game-btn {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border-radius: 5px;
            width: 100%;
        }
        .button {
            background-color: #4CAF50;
            color: white;
            border: none;
        }
        .game-btn {
            background-color: #f44336;
            color: white;
            border: none;
        }
        .status {
            font-size: 18px;
            margin: 10px;
        }
        .bullet-status {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .chamber {
            display: inline-block;
            margin: 5px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: black;
        }
        .bullet {
            background-color: red;
        }
        .empty {
            background-color: gray;
        }
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: red;
            display: flex;
            justify-content: center;
            align-items: center;
            color: yellow;
            font-size: 48px;
            font-weight: bold;
            z-index: 9999;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>러시안 룰렛</h1>
        <div id="mode-selection">
            <button class="button" onclick="startGame(1)">1. 매번 약실을 돌리는 룰렛</button>
            <button class="button" onclick="startGame(2)">2. 약실을 돌리지 않는 룰렛</button>
            <button class="button" onclick="startGame(3)">3. 매번 약실에 총알을 채우는 룰렛</button>
        </div>
        <div id="game" class="hidden">
            <div id="status" class="status">
                <p>시행 횟수: <span id="round-count">0</span></p>
            </div>
            <div id="bullet-status" class="bullet-status"></div>
            <button id="trigger-btn" class="game-btn" onclick="fireTrigger()">방아쇠 당기기</button>
        </div>
    </div>

    <script>
        let mode, roundCount = 0, bullets = 1, isModeOne = true, isGameOver = false;
        const totalChambers = 6;

        function startGame(selectedMode) {
            mode = selectedMode;
            roundCount = 0;
            bullets = 1;
            isModeOne = true;
            isGameOver = false;
            updateStatus();
            updateBulletStatus();
            document.getElementById('mode-selection').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            alert('게임이 시작되었습니다! 방아쇠를 당겨주세요.');
        }

        function fireTrigger() {
            if (isGameOver) return;

            roundCount++;
            let shot;

            switch(mode) {
                case 1:
                    shot = Math.floor(Math.random() * 6) + 1;
                    if (roundCount <= 5) {
                        if (shot === 6) gameOver('빵!');
                        else alert('딸깍...');
                    } else if (isModeOne) {
                        alert('조금 지루한 감이 없지 않아 있네요. 이제 확률을 뒤집어 볼까요?');
                        isModeOne = false; 
                    } else {
                        if (shot <= 5) gameOver('빵!');
                        else alert('딸깍...');
                    }
                    break;
                case 2:
                    shot = Math.floor(Math.random() * (7 - roundCount)) + 1;
                    if (shot === 1) gameOver('빵!');
                    else alert('딸깍...');
                    break;
                case 3:
                    shot = Math.floor(Math.random() * 6) + 1;
                    if (shot <= bullets) gameOver('빵!');
                    else {
                        bullets++;
                        alert('딸깍...');
                    }
                    break;
            }
            updateStatus();
            updateBulletStatus();
        }

        function updateStatus() {
            document.getElementById('round-count').textContent = roundCount;
        }

        function updateBulletStatus() {
            const bulletContainer = document.getElementById('bullet-status');
            bulletContainer.innerHTML = '';
            
            for (let i = 0; i < totalChambers; i++) {
                const chamber = document.createElement('div');
                chamber.classList.add('chamber');

                if (mode === 1 && !isModeOne && i < 5 || mode === 2 && i < roundCount || mode === 3 && i < bullets) {
                    chamber.classList.add('bullet');
                } else {
                    chamber.classList.add('empty');
                }

                bulletContainer.appendChild(chamber);
            }
        }

        function gameOver(message) {
            const gameOverScreen = document.createElement('div');
            gameOverScreen.classList.add('game-over');
            gameOverScreen.textContent = message;
            document.body.appendChild(gameOverScreen);
            document.getElementById('trigger-btn').disabled = true;
            isGameOver = true;
        }
    </script>
</body>
</html>